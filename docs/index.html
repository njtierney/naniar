<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Structures, Summaries, and Visualisations for Missing Data • naniar</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Data Structures, Summaries, and Visualisations for Missing Data">
<meta property="og:description" content="Missing values are ubiquitous in data and need to be explored and
    handled in the initial stages of analysis. 'naniar' provides data structures 
    and functions that facilitate the plotting of missing values and examination 
    of imputations. This allows missing data dependencies to be explored with 
    minimal deviation from the common work patterns of 'ggplot2' and tidy data. ">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">naniar</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/getting-started-w-naniar.html">Getting Started</a>
</li>
<li>
  <a href="articles/naniar-visualisation.html">Gallery</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/replace-with-na.html">Replace with NA</a>
    </li>
    <li>
      <a href="articles/special-missing-values.html">Special Missings</a>
    </li>
    <li>
      <a href="articles/exploring-imputed-values.html">Exploring Imputations</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/njtierney/naniar">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="naniar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#naniar" class="anchor"></a>naniar <img src="reference/figures/naniar-logo.png" align="right">
</h1></div>

<p><code>naniar</code> provides principled, tidy ways to summarise, visualise, and manipulate missing data with minimal deviations from the workflows in ggplot2 and tidy data. It does this by providing:</p>
<ul>
<li>Shadow matrices, a tidy data structure for missing data:
<ul>
<li>
<code><a href="reference/bind_shadow.html">bind_shadow()</a></code> and <code><a href="reference/nabular.html">nabular()</a></code>
</li>
</ul>
</li>
<li>Shorthand summaries for missing data:
<ul>
<li>
<code><a href="reference/n_miss.html">n_miss()</a></code> and <code><a href="reference/n_complete.html">n_complete()</a></code>
</li>
<li>
<code><a href="reference/pct_miss.html">pct_miss()</a></code>and <code><a href="reference/pct_complete.html">pct_complete()</a></code>
</li>
</ul>
</li>
<li>Numerical summaries of missing data in variables and cases:
<ul>
<li>
<code><a href="reference/miss_var_summary.html">miss_var_summary()</a></code> and <code><a href="reference/miss_var_table.html">miss_var_table()</a></code>
</li>
<li>
<code><a href="reference/miss_case_summary.html">miss_case_summary()</a></code>, <code><a href="reference/miss_case_table.html">miss_case_table()</a></code>
</li>
</ul>
</li>
<li>Visualisation for missing data:
<ul>
<li><code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code></li>
<li><code><a href="reference/gg_miss_var.html">gg_miss_var()</a></code></li>
<li><code><a href="reference/gg_miss_case.html">gg_miss_case()</a></code></li>
<li><code><a href="reference/gg_miss_fct.html">gg_miss_fct()</a></code></li>
</ul>
</li>
</ul>
<p>For more details on the workflow and theory underpinning naniar, read the vignette <a href="http://naniar.njtierney.com/articles/getting-started-w-naniar.html">Getting started with naniar</a>.</p>
<p>For a short primer on the data visualisation available in naniar, read the vignette <a href="http://naniar.njtierney.com/articles/naniar-visualisation.html">Gallery of Missing Data Visualisations</a>.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>You can install naniar from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"naniar"</span>)</a></code></pre></div>
<p>Or you can install the development version on github using <code>remotes</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"njtierney/naniar"</span>)</a></code></pre></div>
</div>
<div id="a-short-overview-of-naniar" class="section level1">
<h1 class="hasAnchor">
<a href="#a-short-overview-of-naniar" class="anchor"></a>A short overview of naniar</h1>
<p>Visualising missing data might sound a little strange - how do you visualise something that is not there? One approach to visualising missing data comes from <a href="http://www.ggobi.org/">ggobi</a> and <a href="https://www.swmath.org/software/3067">manet</a>, which replaces <code>NA</code> values with values 10% lower than the minimum value in that variable. This visualisation is provided with the <code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code> ggplot2 geom - which we illustrate by exploring the relationship between Ozone and Solar radiation from the airquality dataset.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> airquality,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Ozone,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">           <span class="dt">y =</span> Solar.R)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>()</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; Warning: Removed 42 rows containing missing values (geom_point).</span></a></code></pre></div>
<p><img src="reference/figures/README-regular-geom-point-1.png" width="700"></p>
<p>ggplot2 does not handle these missing values, and we get a warning message about the missing values.</p>
<p>We can instead use <code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code> to display the missing data</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">library</span>(naniar)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> airquality,</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Ozone,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">           <span class="dt">y =</span> Solar.R)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="reference/geom_miss_point.html">geom_miss_point</a></span>()</a></code></pre></div>
<p><img src="reference/figures/README-geom-miss-point-1.png" width="700"></p>
<p><code><a href="reference/geom_miss_point.html">geom_miss_point()</a></code> has shifted the missing values to now be 10% below the minimum value. The missing values are a different colour so that missingness becomes pre-attentive. As it is a ggplot2 geom, it supports features like faceting and other ggplot features.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">p1 &lt;-</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> airquality,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">       <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Ozone,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">           <span class="dt">y =</span> Solar.R)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="reference/geom_miss_point.html">geom_miss_point</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap">facet_wrap</a></span>(<span class="op">~</span>Month, <span class="dt">ncol =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/theme">theme</a></span>(<span class="dt">legend.position =</span> <span class="st">"bottom"</span>)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">p1</a></code></pre></div>
<p><img src="reference/figures/README-facet-by-month-1.png" width="700"></p>
</div>
<div id="data-structures" class="section level1">
<h1 class="hasAnchor">
<a href="#data-structures" class="anchor"></a>Data Structures</h1>
<p>naniar provides a data structure for working with missing data, the shadow matrix <a href="https://www.researchgate.net/publication/2758672_Missing_Data_in_Interactive_High-Dimensional_Data_Visualization">(Swayne and Buja, 1998)</a>. The shadow matrix is the same dimension as the data, and consists of binary indicators of missingness of data values, where missing is represented as “NA”, and not missing is represented as “!NA”, and variable names are kep the same, with the added suffix “_NA" to the variables.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">head</span>(airquality)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; 1    41     190  7.4   67     5   1</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 2    36     118  8.0   72     5   2</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 3    12     149 12.6   74     5   3</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 4    18     313 11.5   62     5   4</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="kw"><a href="reference/as_shadow.html">as_shadow</a></span>(airquality)</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; # A tibble: 153 x 6</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;    Ozone_NA Solar.R_NA Wind_NA Temp_NA Month_NA Day_NA</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;    &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;    &lt;fct&gt; </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;  1 !NA      !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt;  2 !NA      !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt;  3 !NA      !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt;  4 !NA      !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt;  5 NA       NA         !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt;  6 !NA      NA         !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt;  7 !NA      !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt;  8 !NA      !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt;  9 !NA      !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; 10 NA       !NA        !NA     !NA     !NA      !NA   </span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt; # ... with 143 more rows</span></a></code></pre></div>
<p>Binding the shadow data to the data you help keep better track of the missing values. This format is called “nabular”, a portmanteau of <code>NA</code> and <code>tabular</code>. You can bind the shadow to the data using <code>bind_shadow</code> or <code>nabular</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="reference/bind_shadow.html">bind_shadow</a></span>(airquality)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; # A tibble: 153 x 12</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;    Ozone Solar.R  Wind  Temp Month   Day Ozone_NA Solar.R_NA Wind_NA</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt;  </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;  1    41     190   7.4    67     5     1 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;  2    36     118   8      72     5     2 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  3    12     149  12.6    74     5     3 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  4    18     313  11.5    62     5     4 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  5    NA      NA  14.3    56     5     5 NA       NA         !NA    </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  6    28      NA  14.9    66     5     6 !NA      NA         !NA    </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  7    23     299   8.6    65     5     7 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  8    19      99  13.8    59     5     8 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  9     8      19  20.1    61     5     9 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 10    NA     194   8.6    69     5    10 NA       !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; # ... with 143 more rows, and 3 more variables: Temp_NA &lt;fct&gt;,</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; #   Month_NA &lt;fct&gt;, Day_NA &lt;fct&gt;</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="kw"><a href="reference/nabular.html">nabular</a></span>(airquality)</a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; # A tibble: 153 x 12</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt;    Ozone Solar.R  Wind  Temp Month   Day Ozone_NA Solar.R_NA Wind_NA</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt;    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;    &lt;fct&gt;      &lt;fct&gt;  </span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt;  1    41     190   7.4    67     5     1 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt;  2    36     118   8      72     5     2 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt;  3    12     149  12.6    74     5     3 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt;  4    18     313  11.5    62     5     4 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt;  5    NA      NA  14.3    56     5     5 NA       NA         !NA    </span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt;  6    28      NA  14.9    66     5     6 !NA      NA         !NA    </span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt;  7    23     299   8.6    65     5     7 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt;  8    19      99  13.8    59     5     8 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt;  9     8      19  20.1    61     5     9 !NA      !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt; 10    NA     194   8.6    69     5    10 NA       !NA        !NA    </span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt; # ... with 143 more rows, and 3 more variables: Temp_NA &lt;fct&gt;,</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt; #   Month_NA &lt;fct&gt;, Day_NA &lt;fct&gt;</span></a></code></pre></div>
<p>Using the nabular format helps you manage where missing values are in your dataset and make it easy to do visualisations where you split by missingness:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">airquality <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/bind_shadow.html">bind_shadow</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Temp,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">             <span class="dt">fill =</span> Ozone_NA)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_density">geom_density</a></span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="reference/figures/README-shadow-w-ggplot-1.png" width="700"></p>
<p>And even visualise imputations</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">airquality <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/bind_shadow.html">bind_shadow</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span>simputation<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/simputation/topics/impute_lm">impute_lm</a></span>(Ozone <span class="op">~</span><span class="st"> </span>Temp <span class="op">+</span><span class="st"> </span>Solar.R) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Solar.R,</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">             <span class="dt">y =</span> Ozone,</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">             <span class="dt">colour =</span> Ozone_NA)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>()</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; Warning: Removed 7 rows containing missing values (geom_point).</span></a></code></pre></div>
<p><img src="reference/figures/README-shadow-impute-1.png" width="700"></p>
<p>Or perform an <a href="https://www.nature.com/articles/nmeth.3033">upset</a> plot - to plot of the combinations of missingness across cases, using the <code>gg_miss_upset</code> function</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="reference/gg_miss_upset.html">gg_miss_upset</a></span>(airquality)</a></code></pre></div>
<p><img src="reference/figures/README-gg-miss-upset-1.png" width="700"></p>
<p>naniar does this while following consistent principles that are easy to read, thanks to the tools of the tidyverse.</p>
<p>naniar also provides handy visualations for each variable:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw"><a href="reference/gg_miss_var.html">gg_miss_var</a></span>(airquality)</a></code></pre></div>
<p><img src="reference/figures/README-gg-miss-var-1.png" width="700"></p>
<p>Or the number of missings in a given variable at a repeating span</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="reference/gg_miss_span.html">gg_miss_span</a></span>(pedestrian,</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">             <span class="dt">var =</span> hourly_counts,</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">             <span class="dt">span_every =</span> <span class="dv">1500</span>)</a></code></pre></div>
<p><img src="reference/figures/README-gg-miss-span-1.png" width="700"></p>
<p>You can read about all of the visualisations in naniar in the vignette <a href="http://naniar.njtierney.com/articles/naniar-visualisation.html">Gallery of missing data visualisations using naniar</a>.</p>
<p>naniar also provides handy helpers for calculating the number, proportion, and percentage of missing and complete observations:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="reference/n_miss.html">n_miss</a></span>(airquality)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [1] 44</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw"><a href="reference/n_complete.html">n_complete</a></span>(airquality)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; [1] 874</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw"><a href="reference/prop_miss.html">prop_miss</a></span>(airquality)</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; [1] 0.04793028</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="kw"><a href="reference/prop_complete.html">prop_complete</a></span>(airquality)</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; [1] 0.9520697</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="kw"><a href="reference/pct_miss.html">pct_miss</a></span>(airquality)</a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt; [1] 4.793028</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="kw"><a href="reference/pct_complete.html">pct_complete</a></span>(airquality)</a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; [1] 95.20697</span></a></code></pre></div>
</div>
<div id="numerical-summaries-for-missing-data" class="section level1">
<h1 class="hasAnchor">
<a href="#numerical-summaries-for-missing-data" class="anchor"></a>Numerical summaries for missing data</h1>
<p>naniar provides numerical summaries of missing data, that follow a consistent rule that uses a syntax begining with <code>miss_</code>. Summaries focussing on variables or a single selected variable, start with <code>miss_var_</code>, and summaries for cases (the initial collected row order of the data), they start with <code>miss_case_</code>. All of these functions that return dataframes also work with dplyr’s <code><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>.</p>
<p>For example, we can look at the number and percent of missings in each case and variable with <code><a href="reference/miss_var_summary.html">miss_var_summary()</a></code>, and <code><a href="reference/miss_case_summary.html">miss_case_summary()</a></code>, which both return output ordered by the number of missing values.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw"><a href="reference/miss_var_summary.html">miss_var_summary</a></span>(airquality)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt;   variable n_miss pct_miss</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;     &lt;int&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; 1 Ozone        37    24.2 </span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; 2 Solar.R       7     4.58</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; 3 Wind          0     0   </span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt; 4 Temp          0     0   </span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt; 5 Month         0     0   </span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt; 6 Day           0     0</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="kw"><a href="reference/miss_case_summary.html">miss_case_summary</a></span>(airquality)</a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; # A tibble: 153 x 3</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt;     case n_miss pct_miss</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt;    &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt;  1     5      2     33.3</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt;  2    27      2     33.3</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt;  3     6      1     16.7</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt;  4    10      1     16.7</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt;  5    11      1     16.7</span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt;  6    25      1     16.7</span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt;  7    26      1     16.7</span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt;  8    32      1     16.7</span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt;  9    33      1     16.7</span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt; 10    34      1     16.7</span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; # ... with 143 more rows</span></a></code></pre></div>
<p>You could also <code><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> to work out the number of missings in each variable across the levels within it.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; Attaching package: 'dplyr'</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; The following objects are masked from 'package:stats':</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt;     filter, lag</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; The following objects are masked from 'package:base':</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt;     intersect, setdiff, setequal, union</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">airquality <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(Month) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="reference/miss_var_summary.html">miss_var_summary</a></span>()</a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; # A tibble: 25 x 4</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt;    Month variable n_miss pct_miss</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;     &lt;int&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt;  1     5 Ozone         5     16.1</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt;  2     5 Solar.R       4     12.9</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt;  3     5 Wind          0      0  </span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt;  4     5 Temp          0      0  </span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">#&gt;  5     5 Day           0      0  </span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">#&gt;  6     6 Ozone        21     70  </span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">#&gt;  7     6 Solar.R       0      0  </span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">#&gt;  8     6 Wind          0      0  </span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">#&gt;  9     6 Temp          0      0  </span></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="co">#&gt; 10     6 Day           0      0  </span></a>
<a class="sourceLine" id="cb15-27" data-line-number="27"><span class="co">#&gt; # ... with 15 more rows</span></a></code></pre></div>
<p>You can read more about all of these functions in the vignette <a href="http://naniar.njtierney.com/articles/getting-started-w-naniar.html">“Getting Started with naniar”</a>.</p>
</div>
<div id="contributions" class="section level1">
<h1 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h1>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="future-work" class="section level1">
<h1 class="hasAnchor">
<a href="#future-work" class="anchor"></a>Future Work</h1>
<ul>
<li>Extend the <code>geom_miss_*</code> family to include categorical variables, Bivariate plots: scatterplots, density overlays</li>
<li>SQL translation for databases</li>
<li>Big Data tools (sparklyr, sparklingwater)</li>
<li>Work well with other imputation engines / processes</li>
<li>Provide tools for assessing goodness of fit for classical approaches of MCAR, MAR, and MNAR (graphical inference from <code>nullabor</code> package)</li>
</ul>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>Firstly, thanks to <a href="https://github.com/dicook">Di Cook</a> for giving the initial inspiration for the package and laying down the rich theory and literature that the work in naniar is built upon. Naming credit (once again!) goes to <a href="https://github.com/milesmcbain">Miles McBain</a>. Among various other things, Miles also worked out how to overload the missing data and make it work as a geom. Thanks also to <a href="https://github.com/ColinFay">Colin Fay</a> for helping me understand tidy evaluation and for features such as <code>replace_to_na</code>, <code>miss_*_cumsum</code>, and more.</p>
</div>
<div id="a-note-on-the-name" class="section level2">
<h2 class="hasAnchor">
<a href="#a-note-on-the-name" class="anchor"></a>A note on the name</h2>
<p>naniar was previously named <code>ggmissing</code> and initially provided a ggplot geom and some other visualisations. <code>ggmissing</code> was changed to <code>naniar</code> to reflect the fact that this package is going to be bigger in scope, and is not just related to <code>ggplot2</code>. Specifically, the package is designed to provide a suite of tools for generating visualisations of missing values and imputations, manipulate, and summarise missing data.</p>
<blockquote>
<p>…But <em>why</em> naniar?</p>
</blockquote>
<p>Well, I think it is useful to think of missing values in data being like this other dimension, perhaps like <a href="https://en.wikipedia.org/wiki/The_Chronicles_of_naniar">C.S. Lewis’s Narnia</a> - a different world, hidden away. You go inside, and sometimes it seems like you’ve spent no time in there but time has passed very quickly, or the opposite. Also, <code>NA</code>niar = na in r, and if you so desire, naniar may sound like “noneoya” in an nz/aussie accent. Full credit to <span class="citation">@MilesMcbain</span> for the name, and <span class="citation">@Hadley</span> for the rearranged spelling.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=naniar">https://​cloud.r-project.org/​package=naniar</a>
</li>
<li>Browse source code at <br><a href="https://github.com/njtierney/naniar">https://​github.com/​njtierney/​naniar</a>
</li>
<li>Report a bug at <br><a href="https://github.com/njtierney/naniar/issues">https://​github.com/​njtierney/​naniar/​issues</a>
</li>
<li>Learn more at <br><a href="https://github.com/njtierney/naniar">https://​github.com/​njtierney/​naniar</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Tierney <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0003-1460-8722" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li>Di Cook <br><small class="roles"> Author </small> <a href="https://orcid.org/https://orcid.org/0000-0002-3813-7155" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li>Miles McBain <br><small class="roles"> Author </small> <a href="https://orcid.org/https://orcid.org/0000-0003-2865-2548" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li>Colin Fay <br><small class="roles"> Author </small> <a href="https://orcid.org/https://orcid.org/0000-0001-7343-1846" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://ci.appveyor.com/project/njtierney/naniar-xb96h"><img src="https://ci.appveyor.com/api/projects/status/github/njtierney/naniar?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://travis-ci.org/njtierney/naniar"><img src="https://travis-ci.org/njtierney/naniar.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/github/njtierney/naniar?branch=master"><img src="https://img.shields.io/codecov/c/github/njtierney/naniar/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://cran.r-project.org/package=naniar"><img src="http://www.r-pkg.org/badges/version/naniar" alt="CRAN Status Badge"></a></li>
<li><a href="http://cran.rstudio.com/web/packages/naniar/index.html"><img src="http://cranlogs.r-pkg.org/badges/naniar" alt="CRAN Downloads Each Month"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Di Cook, Miles McBain, Colin Fay.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '48bc42eefc5234a6463c3b99e53dfda1',
    indexName: 'naniar',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
